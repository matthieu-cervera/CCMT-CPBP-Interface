{% extends 'base.html' %}
<!-- paramSelector.html : page for the user to choose additional parameters for the generation (seed, beam_search, additional
    constraints...)-->

{% block content %}
    <main>

        <div class="container-fluid" style="height: 120px;">
        </div>
        <div class="container">
            <div class="row">
                <div>
                    <h1 class="text-center display-4" style>Select parameters made by our researchers</h1>
                </div>
                <div>
                    <p class="text-muted text-center mb-0 mt-4">Learn more about the project and the parameters below</p>
                </div>
            </div>
            <hr />
            <form action="{{ url_for('CMT_preprocess') }}" method="POST">
                <div class="row">
                    <div class="card" style="width: 100%;">
                        <img class="card-img-top p-4" src="static/images/Architecture_CMT.PNG" width="5"
                                height="600" alt="Card image cap">
                        <div class="car-body text-center">
                            <figure>
                                <blockquote class="blockquote">
                                    <p>
                                        <b>CMT_CPBP</b>
                                    </p>
                                </blockquote>
                                <figcaption class="blockquote-footer">
                                    <i>Work provided by Virasone Maribod, Matthieu Cervera, Pablo Balaguer Lopez</i>
                                </figcaption>
                            </figure>
                            <p class="card-text text-left">Modified version of CMT (Chord Conditioned Melody
                                Transformer), improved by Constraint Programming </p>
                            <a href="https://github.com/Manibod/CMT_CPBP"
                                class="btn btn-outline-dark btn-lg btn-block mt-4" target="_blank"> <i
                                    class="fa fa-github"></i> | Github </a>
                            <div class="container" style="height: 20px;"></div>
                            <hr>
                            <div class="row">
                                <p>
                                    <a class="btn btn-dark btn-lg btn-block mt-4" data-bs-toggle="collapse"
                                        href="#midiCMT" role="button" aria-expanded="false" aria-controls="midiCMT">
                                        MIDI Files Information
                                    </a>
                                </p>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="collapse" id="midiCMT">
                                    <div class="card card-body">
                                        <b>MIDI Files characteristics for CMT_CPBP: </b>
                                        <ul class="list-unstyled mt-2">
                                            <li><i class="fa fa-music"></i>
                                                MIDI Files contain only Melody and Chords
                                            </li>
                                            <li><i class="fa fa-music"></i>
                                                Both parts required simultaneously
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <hr>

                            <div class="row" style="width: 20%; margin: 0 auto;">
                                <div style="text-align: center; font-size: 20px; font-weight: bold; margin-bottom: 10px;">HyperParameters</div>
                                <div style="width: 60%; margin: 0 auto;">
                                    <label for="seed">Seed</label>
                                    <input style="width: 50%" type="number" name="seed" id="seed">
                                </div>
                                <br>
                                <div style="width: 60%; margin: 0 auto;">
                                    <label for="num_prime">num_prime</label>
                                    <input style="width: 50%" type="number" name="num_prime" id="num_prime">
                                </div>
                                <br>
                                <div style="width: 60%; margin: 0 auto;">
                                    <label for="topk">topk</label>
                                    <input style="width: 50%" type="number" name="topk" id="topk">
                                </div>
                                <br>
                            </div>
                            <hr>
                           
                            <div class="row" style="width: 20%; margin: 0 auto;">
                                <div style="text-align: center; font-size: 20px; font-weight: bold; margin-bottom: 10px;">Beam Search</div>
                                <label for="beam_search">Activate Beam Search:</label>
                                <input type="checkbox" name="beam_search" id="beam_search" value="1">
                                <br>
                                <div style="width: 70%; margin: 0 auto;">
                                    <label for="beam_search_type">Beam Search Type:</label>
                                    <select name="beam_search_type" id="beam_search_type">
                                        <option value="pitch">Pitch</option>
                                        <option value="rhythm">Rhythm</option>
                                    </select>
                                </div>
                                <br>
                                <div style="width: 60%; margin: 0 auto;">
                                    <label for="beam_width">Beam Width:</label>
                                    <input style="width: 50%" type="number" name="beam_width" id="beam_width">
                                </div>
                                <br>
                            </div>
                            <hr>
                            <div class="row" style="width: 70%; margin: 0 auto;">
                                <div style="text-align: center; font-size: 20px; font-weight: bold; margin-bottom: 10px;">Constraints</div>
                                <br>
                                <label for="added_constraints">Enter Additional Pitch Constraints:</label>
                                <input type="text" value="{{pitch}}" name="added_Pconstraints" id="added_Pconstraints">
                                <br>
                                <label for="added_constraints">Enter Additional Rhythm Constraints:</label>
                                <input type="text" value="{{rhythm}}" name="added_Rconstraints" id="added_Rconstraints">
                                <br>
                            </div>
                            <hr>
                            <div class="row">
                                <p>
                                    <input type="submit" class="btn btn-dark btn-lg btn-block mt-4" style="background-color: #006400" value="Next">
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="container-fluid" style="height: 80px;"></div>
        <div class="container" style="width: 70%;">
        </div>
        <div class="container-fluid" style="height: 40px;">
        </div>
        <div class="container-fluid" style="height: 40px;"></div>
        <!--User Status Form-->
        {% include 'user_status.html' %}
        <!---->
        <!--Overlay-->
        <div class="overlayPopUp" style="position: fixed;"></div>
        <!---->
    </main>
    <footer class="text-center text-white border-top" style="background-color: #5f99c5; ">
        <div class="container-fluid justify-content-center">
            <div class="row justify-content-center">
                <div class="col-4"></div>
                <div class="col m-3 align-items-center">
                    <a class="btn text-white btn-circle-pablo m-1" style="background-color: #3b5998;"
                        href="https://www.facebook.com/polymtl" target="_blank" role="button"><i
                            class="fa fa-facebook-f fa-lg"></i>
                    </a>
                </div>
                <div class="col m-3 align-items-center">
                    <a class="btn text-white btn-circle-pablo m-1" style="background-color: #333333;"
                        href="https://www.youtube.com/@polymtlvideos" target="_blank" role="button"><i
                            class="fa fa-youtube fa-lg"></i>
                    </a>
                </div>
                <div class="col m-3 align-items-center">
                    <a class="btn text-white btn-circle-pablo m-1" style="background-color: #dd4b39;"
                        href="https://www.polymtl.ca/" target="_blank" role="button"><i class="fa fa-google fa-lg"></i>
                    </a>
                    </button>
                </div>
                <div class="col m-3 align-items-center">
                    <a class="btn text-white btn-circle-pablo m-1" style="background-color: #55acee;"
                        href="https://twitter.com/polymtl" target="_blank" role="button"><i
                            class="fa fa-twitter fa-lg"></i>
                    </a>
                </div>
                <div class="col-4"></div>
            </div>
            <div class="row">
                <div class="text-center text-white p-3" style="background-color: #1A6DAC">
                    © 2022 Copyright:
                    <a class="text-white" href="https://www.polymtl.ca/" target="_blank">Polytechnique Montréal</a>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>
    <script type="text/javascript" src="static/js/paramSelector.js"></script>
    <script type="text/javascript" src="static/js/config.js"></script>


    {% endblock %}